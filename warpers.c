#define INCL_BASE
#include <os2.h>

void main(void) {

    short int usu1,usu2;
    unsigned long int contador,contador2;

/* longitud must contain the number of cities multiplied by two, plus one. This is:

	longitud=1+ncities*2

This is because each city is defined by two numbers (X and Y coordinates). The last number in the list is the END-OF-LIST value */

    unsigned long int longitud=617;

/* the length of the matrix usuarios is 'longitud'. This matrix contains the X and Y coordinates of the cities. To allow an easy maintenance of this, I wrote the coordinates in alphabetical order. */

    short int usuarios[617]={

        /* A (14) */

        1071,792,1847,303,591,712,1020,733,1047,723,1036,717,
        1070,807,1648,807,1084,767,567,731,554,704,1177,728,
        536,703,481,677,

        /* B (29) */

        1010,726,1071,799,1048,744,1138,787,1031,753,1052,738,1053,788,
        1074,778,596,750,1034,806,515,681,519,711,1113,
        800,1094,797,1036,751,1536,811,512,761,
        1070,796,621,543,1049,799,1038,820,729,512,1101,805,628,744,
        1935,341,592,742,1062,802,1059,789,714,299,1029,751,

        /* C (22) */

        399,795,501,699,1147,309,1045,721,1049,736,555,749,1431,836,588,705,
        433,757,541,743,415,668,1050,803,562,724,1081,792,1504,550,576,699,
        572,729,1111,822,1025,722,1039,746,1001,752,576,729,

        /* D (9) */

        484,684,1080,782,415,738,524,733,1017,718,704,381,
        1111,825,634,762,1013,833,1432,727,

        /* E (8) */

        614,737,399,805,1055,729,1044,722,428,687,1082,781,586,745,1068,794,

        /* F (6) */

        1083,783,1107,755,1096,823,827,481,350,709,1094,796,

        /* G (10) */

        571,750,1086,789,401,698,1057,744,1027,824,
        1112,839,1030,718,399,744,420,709,1110,804,

        /* H (11) */

        1070,809,591,792,1120,802,1096,804,1084,781,1051,803,
        1073,794,1111,817,1718,644,1165,862,492,676,

        /* I (5) */

        1181,828,546,737,1096,767,1645,809,335,766,

        /* J (6) */

        1046,753,485,772,1105,787,1249,699,1200,352,1182,854,

        /* K (12) */

        1128,776,1080,780,1097,786,1827,783,1097,819,
        1214,790,603,607,1243,689,580,756,292,813,1057,796,1116,843,

        /* L (19) */

        623,762,574,664,956,668,556,747,1081,778,1071,808,
        1111,794,1071,810,573,715,1096,774,531,760,
        1120,788,996,728,1250,835,1033,749,1174,856,1050,800,
        366,698,364,698,

        /* M (21) */

        529,751,1024,735,1402,821,1084,789,1026,717,1031,728,
        591,737,576,738,1885,286,577,667,526,711,570,725,1094,764,1125,727,
        507,761,1085,867,729,304,618,769,1025,732,1269,827,1096,772,

        /* N (15) */

        1108,819,339,720,541,686,1083,790,459,790,1925,316,
        605,720,619,738,1085,790,1106,781,1066,809,1119,839,1055,806,
        1211,822,1511,797,

        /* O (12) */

        480,711,1081,809,342,792,510,736,1466,834,1069,810,1255,816,
        1356,805,1102,849,1132,876,1189,877,1019,753,

        /* P (17) */

        1627,493,334,723,1059,782,582,707,1094,762,523,719,1713,312,588,741,
        1128,765,398,699,1205,820,513,776,334,767,757,336,1198,358,1205,837,
        1064,791,

        /* Q (1) */

        634,773,

        /* R (14) */

        643,765,1935,343,443,802,353,729,1112,799,786,370,494,673,1184,829,
        801,373,501,755,1118,746,1022,718,1065,804,565,747,

        /* S (30) */

        643,614,397,739,1331,814,367,694,390,738,332,726,349,707,635,310,1002,750,
        786,372,784,373,400,696,338,780,1783,718,1015,721,1919,308,
        1645,509,1098,845,1092,778,570,726,1073,842,538,741,1056,790,378,724,
        523,731,1216,847,1146,848,634,749,1104,785,528,685,

        /* T (16) */

        1743,644,1487,878,1098,773,961,664,1050,742,1171,741,350,708,1857,709,
        1426,827,1089,768,582,758,1896,390,1105,873,627,740,
        1257,821,372,690,

        /* U (1) */

        1155,869,

        /* V (11) */

        1048,734,1181,708,321,785,1001,747,1006,739,1101,763,
        1227,813,1228,851,1303,789,1279,786,

        /* W (11) */

        636,753,607,731,578,716,1086,790,261,870,482,725,1130,778,579,720,596,752,
        617,735,484,790,1093,791,

        /* Y (2) */

        607,719,402,812,

        /* Z (3) */

        1042,744,1129,765,1081,797,

        /* END-OF-LIST value */

        30000};

    HFILE handle,bytes;
    ULONG action=0;
    APIRET rc;

    rc = DosOpen("users.nfo",&handle,&action,0,0,18,17,NULL);
    rc = DosWrite(handle,usuarios,longitud*2,&bytes);
    rc = DosClose(handle);

    for(contador=0;contador<(longitud-2);contador+=2) {
        usu1=usuarios[contador];
        usu2=usuarios[contador+1];
        for(contador2=contador+2;contador2<longitud;contador2+=2) {
            if((usuarios[contador2]==usu1) && (usuarios[1+contador2]==usu2))
                printf("There is a coincidence with %d and %d in %d,%d\n",contador,contador2,usu1,usu2);
        }
    }
}
